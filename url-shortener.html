<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener - R√∫t G·ªçn Link Mi·ªÖn Ph√≠ | ZapTools</title>
    <meta name="description" content="R√∫t g·ªçn link mi·ªÖn ph√≠, nhanh ch√≥ng. T·∫°o short URL cho Facebook, Twitter, Instagram. Free URL shortener online.">
    <link rel="stylesheet" href="dark-mode.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: white; padding: 1rem; }
        .container { max-width: 900px; margin: 0 auto; }
        .back-link { display: inline-block; margin-bottom: 1rem; color: white; text-decoration: none; opacity: 0.8; transition: opacity 0.3s; }
        .back-link:hover { opacity: 1; }
        .header { text-align: center; margin-bottom: 2rem; }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { font-size: 1.1rem; opacity: 0.9; }
        .tool-container { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 2rem; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }

        .input-section { margin-bottom: 2rem; }
        .form-group { margin-bottom: 1.5rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 1rem; }
        input[type="url"], input[type="text"] { width: 100%; padding: 1rem; border-radius: 10px; border: 2px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; font-size: 1rem; transition: border-color 0.3s; }
        input:focus { outline: none; border-color: rgba(255,255,255,0.6); }
        input::placeholder { color: rgba(255,255,255,0.5); }

        .options-toggle { margin-bottom: 1rem; }
        .checkbox-group { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
        .checkbox-group input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
        .checkbox-group label { margin: 0; cursor: pointer; font-weight: 500; }

        .custom-alias { display: none; margin-top: 1rem; }
        .custom-alias.show { display: block; animation: slideDown 0.3s; }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn { padding: 1rem 2rem; background: linear-gradient(135deg, #FF0080 0%, #FF8C00 100%); color: white; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 700; cursor: pointer; width: 100%; margin: 0.5rem 0; transition: all 0.3s; box-shadow: 0 4px 15px rgba(255,0,128,0.3); }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(255,0,128,0.4); }
        .btn:active { transform: translateY(-1px); }
        .btn:disabled { background: rgba(255,255,255,0.2); cursor: not-allowed; transform: none; }

        .result-section { display: none; margin-top: 2rem; background: rgba(255,255,255,0.08); padding: 2rem; border-radius: 15px; border: 2px solid rgba(255,255,255,0.2); }
        .result-section.show { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-header { text-align: center; margin-bottom: 1.5rem; }
        .result-header h3 { font-size: 1.3rem; margin-bottom: 0.5rem; }
        .success-icon { font-size: 3rem; margin-bottom: 1rem; }

        .url-display { background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem; }
        .url-label { font-size: 0.85rem; opacity: 0.8; margin-bottom: 0.5rem; }
        .url-value { font-size: 1.2rem; font-weight: 600; word-break: break-all; color: #FFD700; }

        .qr-section { text-align: center; margin: 1.5rem 0; padding: 1.5rem; background: rgba(255,255,255,0.9); border-radius: 10px; }
        .qr-code { margin: 1rem auto; max-width: 200px; }
        .qr-code img { width: 100%; border-radius: 10px; }

        .action-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .copy-btn { background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); }
        .new-btn { background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); }

        .stats-section { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 1.5rem; }
        .stat-card { background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; text-align: center; }
        .stat-value { font-size: 1.8rem; font-weight: 700; color: #FFD700; margin-bottom: 0.3rem; }
        .stat-label { font-size: 0.85rem; opacity: 0.8; }

        .error-message { background: rgba(244,67,54,0.2); border: 2px solid #f44336; padding: 1rem; border-radius: 10px; margin: 1rem 0; display: none; }
        .error-message.show { display: block; animation: shake 0.5s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .tips-section { background: rgba(255,255,255,0.08); padding: 1.5rem; border-radius: 10px; margin-top: 2rem; }
        .tips-section h3 { margin-bottom: 1rem; }
        .tips-section ul { list-style: none; padding: 0; }
        .tips-section li { padding: 0.5rem 0; padding-left: 1.5rem; position: relative; }
        .tips-section li:before { content: "‚úì"; position: absolute; left: 0; color: #4CAF50; font-weight: bold; }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .tool-container { padding: 1.5rem; }
            .action-buttons { grid-template-columns: 1fr; }
            .stats-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="Index.html" class="back-link">‚Üê V·ªÅ trang ch·ªß ZapTools</a>
        <div class="header">
            <h1>üîó URL Shortener</h1>
            <p>R√∫t g·ªçn link nhanh ch√≥ng v√† mi·ªÖn ph√≠!</p>
        </div>
        <div class="tool-container">
            <!-- Input Section -->
            <div class="input-section">
                <div class="form-group">
                    <label>üåê Nh·∫≠p URL d√†i c·∫ßn r√∫t g·ªçn:</label>
                    <input type="url" id="longUrl" placeholder="https://example.com/very/long/url/that/needs/to/be/shortened">
                </div>

                <div class="options-toggle">
                    <div class="checkbox-group" onclick="toggleCustomAlias()">
                        <input type="checkbox" id="customAliasCheck">
                        <label for="customAliasCheck">‚ú® T√πy ch·ªânh alias (t√™n ng·∫Øn)</label>
                    </div>
                </div>

                <div class="custom-alias" id="customAliasDiv">
                    <div class="form-group">
                        <label>üéØ Custom Alias (t√πy ch·ªçn):</label>
                        <input type="text" id="customAlias" placeholder="my-custom-link">
                        <small style="opacity: 0.8; font-size: 0.85rem; margin-top: 0.5rem; display: block;">
                            Ch·ªâ d√πng ch·ªØ c√°i, s·ªë, g·∫°ch ngang (-) v√† g·∫°ch d∆∞·ªõi (_)
                        </small>
                    </div>
                </div>

                <button class="btn" onclick="shortenUrl()">‚úÇÔ∏è R√∫t g·ªçn URL</button>
            </div>

            <!-- Error Message -->
            <div class="error-message" id="errorMessage"></div>

            <!-- Result Section -->
            <div class="result-section" id="resultSection">
                <div class="result-header">
                    <div class="success-icon">‚úÖ</div>
                    <h3>Link ƒë√£ ƒë∆∞·ª£c r√∫t g·ªçn th√†nh c√¥ng!</h3>
                </div>

                <div class="url-display">
                    <div class="url-label">Link g·ªëc:</div>
                    <div class="url-value" id="originalUrl" style="font-size: 0.9rem; color: rgba(255,255,255,0.7);"></div>
                </div>

                <div class="url-display">
                    <div class="url-label">Link r√∫t g·ªçn:</div>
                    <div class="url-value" id="shortUrl"></div>
                </div>

                <!-- QR Code -->
                <div class="qr-section">
                    <div style="color: #333; font-weight: 600; margin-bottom: 0.5rem;">üì± QR Code</div>
                    <div class="qr-code" id="qrCode"></div>
                </div>

                <!-- Stats -->
                <div class="stats-section">
                    <div class="stat-card">
                        <div class="stat-value" id="savedChars">0</div>
                        <div class="stat-label">K√Ω t·ª± ƒë√£ ti·∫øt ki·ªám</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="reduction">0%</div>
                        <div class="stat-label">Gi·∫£m ƒë·ªô d√†i</div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn copy-btn" onclick="copyShortUrl()">üìã Copy Link</button>
                    <button class="btn new-btn" onclick="reset()">üîÑ R√∫t g·ªçn link m·ªõi</button>
                </div>
            </div>

            <!-- Tips Section -->
            <div class="tips-section">
                <h3>üí° T·∫°i sao n√™n r√∫t g·ªçn link?</h3>
                <ul>
                    <li>D·ªÖ nh·ªõ v√† chia s·∫ª h∆°n tr√™n social media</li>
                    <li>Ti·∫øt ki·ªám k√Ω t·ª± khi ƒëƒÉng Twitter, SMS</li>
                    <li>Tr√¥ng chuy√™n nghi·ªáp h∆°n trong email, in ·∫•n</li>
                    <li>T·∫°o QR code g·ªçn g√†ng h∆°n</li>
                    <li>Ho√†n to√†n mi·ªÖn ph√≠, kh√¥ng c·∫ßn ƒëƒÉng k√Ω</li>
                </ul>
            </div>
        </div>
    </div>
    <script src="dark-mode.js"></script>
    <script>
        let currentShortUrl = '';

        function toggleCustomAlias() {
            const checkbox = document.getElementById('customAliasCheck');
            const div = document.getElementById('customAliasDiv');
            checkbox.checked = !checkbox.checked;

            if (checkbox.checked) {
                div.classList.add('show');
            } else {
                div.classList.remove('show');
            }
        }

        function validateUrl(url) {
            try {
                const urlObj = new URL(url);
                return urlObj.protocol === 'http:' || urlObj.protocol === 'https:';
            } catch {
                return false;
            }
        }

        async function shortenUrl() {
            const longUrl = document.getElementById('longUrl').value.trim();
            const customAlias = document.getElementById('customAliasCheck').checked ?
                document.getElementById('customAlias').value.trim() : '';
            const errorDiv = document.getElementById('errorMessage');
            const resultSection = document.getElementById('resultSection');

            // Hide previous results
            errorDiv.classList.remove('show');
            resultSection.classList.remove('show');

            // Validation
            if (!longUrl) {
                showError('Vui l√≤ng nh·∫≠p URL c·∫ßn r√∫t g·ªçn!');
                return;
            }

            if (!validateUrl(longUrl)) {
                showError('URL kh√¥ng h·ª£p l·ªá! Vui l√≤ng nh·∫≠p URL ƒë·∫ßy ƒë·ªß (b·∫Øt ƒë·∫ßu v·ªõi http:// ho·∫∑c https://)');
                return;
            }

            if (customAlias && !/^[a-zA-Z0-9_-]+$/.test(customAlias)) {
                showError('Custom alias ch·ªâ ƒë∆∞·ª£c ch·ª©a ch·ªØ c√°i, s·ªë, g·∫°ch ngang (-) v√† g·∫°ch d∆∞·ªõi (_)');
                return;
            }

            // Show loading
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '‚è≥ ƒêang x·ª≠ l√Ω...';
            btn.disabled = true;

            try {
                // Using is.gd API (free, no API key needed)
                let apiUrl = `https://is.gd/create.php?format=json&url=${encodeURIComponent(longUrl)}`;

                if (customAlias) {
                    apiUrl += `&shorturl=${encodeURIComponent(customAlias)}`;
                }

                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.shorturl) {
                    currentShortUrl = data.shorturl;
                    displayResult(longUrl, data.shorturl);
                } else if (data.errormessage) {
                    showError(data.errormessage);
                } else {
                    showError('Kh√¥ng th·ªÉ r√∫t g·ªçn URL. Vui l√≤ng th·ª≠ l·∫°i!');
                }

            } catch (error) {
                console.error('Error:', error);
                showError('C√≥ l·ªói x·∫£y ra. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi internet v√† th·ª≠ l·∫°i!');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function displayResult(originalUrl, shortUrl) {
            document.getElementById('originalUrl').textContent = originalUrl;
            document.getElementById('shortUrl').textContent = shortUrl;

            // Calculate stats
            const savedChars = originalUrl.length - shortUrl.length;
            const reduction = Math.round((savedChars / originalUrl.length) * 100);

            document.getElementById('savedChars').textContent = savedChars;
            document.getElementById('reduction').textContent = reduction + '%';

            // Generate QR Code using QR Server API (free and reliable)
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(shortUrl)}`;
            document.getElementById('qrCode').innerHTML = `<img src="${qrUrl}" alt="QR Code" style="max-width: 100%;">`;

            // Show result
            document.getElementById('resultSection').classList.add('show');
        }

        function copyShortUrl() {
            navigator.clipboard.writeText(currentShortUrl).then(() => {
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úÖ ƒê√£ copy!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            }).catch(err => {
                alert('‚ùå Kh√¥ng th·ªÉ copy. Vui l√≤ng copy th·ªß c√¥ng.');
            });
        }

        function reset() {
            document.getElementById('longUrl').value = '';
            document.getElementById('customAlias').value = '';
            document.getElementById('customAliasCheck').checked = false;
            document.getElementById('customAliasDiv').classList.remove('show');
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('errorMessage').classList.remove('show');
            currentShortUrl = '';
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = '‚ùå ' + message;
            errorDiv.classList.add('show');
        }

        // Allow Enter key to trigger shortening
        document.getElementById('longUrl').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                shortenUrl();
            }
        });

        document.getElementById('customAlias').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                shortenUrl();
            }
        });
    </script>
</body>
</html>
